/**
 * HUD Decorations - Lightweight CSS-based visual enhancements
 * 
 * This stylesheet adds decorative visual elements to the game's HUD (Heads-Up Display)
 * using only CSS techniques to ensure zero performance impact on canvas rendering.
 * 
 * Key Features:
 * - Corner ornaments using CSS borders and pseudo-elements
 * - Subtle background patterns and gradients
 * - Animated accents (rotating hexagons, pulsing values)
 * - Hover effects for better interactivity feedback
 * - Full performance mode support - all decorations are disabled when visualsLow is true
 * 
 * Performance Considerations:
 * - All decorations are CSS-only (no JavaScript, no canvas rendering)
 * - Animations use GPU-accelerated properties (transform, opacity)
 * - Performance mode class (body.performance-mode) disables all decorations
 * - Zero impact on game logic or canvas FPS
 * 
 * Usage:
 * - Decorations are automatically applied to .hud-card, .merged-run-hud, .performance-hud, .stat-block
 * - Toggle performance mode with the "Perfo" button to disable decorations
 * - The body.performance-mode class is managed by src/main.ts
 */

/* ===== HUD CARD BASE STYLES ===== */
.hud-card,
.merged-run-hud,
.performance-hud,
.stat-block {
  background:
    linear-gradient(155deg, var(--panel-surface-strong), var(--panel-surface)),
    radial-gradient(circle at 20% 20%, color-mix(in oklch, var(--icon-accent) 30%, transparent), transparent 45%),
    radial-gradient(circle at 80% 80%, color-mix(in oklch, oklch(var(--s, 0.6 0.2 300)) 28%, transparent), transparent 50%);
  border: 1px solid var(--panel-border);
  box-shadow:
    0 8px 30px oklch(0 0 0 / 35%),
    inset 0 0 20px oklch(var(--p, 0.6 0.2 260) / 8%);
}

.hud-card,
.merged-run-hud,
.performance-hud {
  backdrop-filter: blur(var(--panel-blur)) saturate(115%);
}

/* ===== HUD CARD CORNER ORNAMENTS ===== */
.hud-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 40px;
  height: 40px;
  border: 2px solid oklch(var(--p, 0.6 0.2 260) / 30%);
  border-right: none;
  border-bottom: none;
  border-top-left-radius: 0.75rem;
  pointer-events: none;
  z-index: 1;
  transition: opacity 0.3s ease;
}

.hud-card::after {
  content: '';
  position: absolute;
  bottom: 0;
  right: 0;
  width: 40px;
  height: 40px;
  border: 2px solid oklch(var(--p, 0.6 0.2 260) / 30%);
  border-left: none;
  border-top: none;
  border-bottom-right-radius: 0.75rem;
  pointer-events: none;
  z-index: 1;
  transition: opacity 0.3s ease;
}

/* ===== HUD CARD HEADER DECORATIONS ===== */
.hud-card h2 {
  position: relative;
}

.hud-card h2::before {
  content: '◆';
  color: oklch(var(--p, 0.6 0.2 260) / 60%);
  margin-right: 0.5rem;
  font-size: 0.8em;
}

.hud-card h2::after {
  content: '◆';
  color: oklch(var(--p, 0.6 0.2 260) / 60%);
  margin-left: 0.5rem;
  font-size: 0.8em;
}

/* ===== MERGED RUN HUD DECORATIONS ===== */
.merged-run-hud {
  position: relative;
  box-shadow: 
    0 4px 20px oklch(0 0 0 / 25%),
    inset 0 0 30px oklch(var(--p, 0.6 0.2 260) / 10%);
}

.merged-run-hud::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 30px;
  height: 30px;
  border: 2px solid oklch(var(--p, 0.6 0.2 260) / 35%);
  border-right: none;
  border-bottom: none;
  border-top-left-radius: 0.75rem;
  pointer-events: none;
  transition: opacity 0.3s ease;
}

.merged-run-hud::after {
  content: '';
  position: absolute;
  bottom: 0;
  right: 0;
  width: 30px;
  height: 30px;
  border: 2px solid oklch(var(--p, 0.6 0.2 260) / 35%);
  border-left: none;
  border-top: none;
  border-bottom-right-radius: 0.75rem;
  pointer-events: none;
  transition: opacity 0.3s ease;
}

/* Live values header */
.live-values-header {
  position: relative;
}

.live-values-header::before {
  content: '⬢';
  position: absolute;
  left: 0.5rem;
  top: 50%;
  transform: translateY(-50%);
  color: oklch(var(--in, 0.7 0.15 220) / 50%);
  font-size: 0.7em;
  animation: rotate-slow 8s linear infinite;
}

.live-values-header::after {
  content: '';
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: -2px;
  width: 60px;
  height: 2px;
  background: linear-gradient(
    90deg,
    transparent,
    oklch(var(--in, 0.7 0.15 220)),
    transparent
  );
}

/* ===== LIVE VALUE NUMBER ANIMATION ===== */
.live-value-number {
  animation: subtle-pulse 3s ease-in-out infinite;
}

@keyframes subtle-pulse {
  0%, 100% {
    text-shadow: 0 1px 3px oklch(0 0 0 / 60%);
  }
  50% {
    text-shadow: 0 1px 6px oklch(var(--wa, 0.75 0.15 85) / 40%);
  }
}

/* ===== PERFORMANCE HUD DECORATIONS ===== */
.performance-hud {
  position: relative;
  box-shadow: 
    0 4px 20px oklch(0 0 0 / 40%),
    inset 0 0 30px oklch(var(--su, 0.7 0.2 160) / 12%);
}

.performance-hud::before {
  content: '';
  position: absolute;
  top: 0;
  right: 0;
  width: 25px;
  height: 25px;
  border: 2px solid oklch(var(--su, 0.7 0.2 160) / 40%);
  border-left: none;
  border-bottom: none;
  border-top-right-radius: 0.5rem;
  pointer-events: none;
  transition: opacity 0.3s ease;
}

.performance-hud::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  width: 25px;
  height: 25px;
  border: 2px solid oklch(var(--su, 0.7 0.2 160) / 40%);
  border-right: none;
  border-top: none;
  border-bottom-left-radius: 0.5rem;
  pointer-events: none;
  transition: opacity 0.3s ease;
}

/* Performance header */
.performance-header {
  position: relative;
}

.performance-header::before {
  content: '⬡';
  position: absolute;
  left: 0.5rem;
  top: 50%;
  transform: translateY(-50%);
  color: oklch(var(--su, 0.7 0.2 160) / 50%);
  font-size: 0.7em;
  animation: rotate-slow 6s linear infinite;
}

.performance-header::after {
  content: '';
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: -2px;
  width: 50px;
  height: 2px;
  background: linear-gradient(
    90deg,
    transparent,
    oklch(var(--su, 0.7 0.2 160)),
    transparent
  );
}

/* ===== STAT BLOCK DECORATIONS ===== */
.stat-block {
  position: relative;
  box-shadow: 
    0 4px 20px oklch(0 0 0 / 25%),
    inset 0 0 30px oklch(var(--p, 0.6 0.2 260) / 8%);
}

.stat-block::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 30px;
  height: 30px;
  border: 2px solid oklch(var(--p, 0.6 0.2 260) / 30%);
  border-right: none;
  border-bottom: none;
  border-top-left-radius: 0.75rem;
  pointer-events: none;
  transition: opacity 0.3s ease;
}

.stat-block::after {
  content: '';
  position: absolute;
  bottom: 0;
  right: 0;
  width: 30px;
  height: 30px;
  border: 2px solid oklch(var(--p, 0.6 0.2 260) / 30%);
  border-left: none;
  border-top: none;
  border-bottom-right-radius: 0.75rem;
  pointer-events: none;
  transition: opacity 0.3s ease;
}

/* Stat block header decorations */
.stat-block h2 {
  position: relative;
}

/* Only add hexagon decoration to non-collapsible stat-blocks */
.stat-block:not(.collapsible) h2::before {
  content: '⬢';
  position: absolute;
  left: 0.5rem;
  top: 50%;
  transform: translateY(-50%);
  color: oklch(var(--p, 0.6 0.2 260) / 50%);
  font-size: 0.7em;
  animation: rotate-slow 8s linear infinite;
}

.stat-block h2::after {
  content: '';
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: -2px;
  width: 60px;
  height: 2px;
  background: linear-gradient(
    90deg,
    transparent,
    oklch(var(--p, 0.6 0.2 260)),
    transparent
  );
}

.stat-block:hover {
  border-color: oklch(var(--p, 0.6 0.2 260) / 35%);
  transition: border-color 0.3s ease;
}

/* ===== ANIMATIONS ===== */
@keyframes rotate-slow {
  from {
    transform: translateY(-50%) rotate(0deg);
  }
  to {
    transform: translateY(-50%) rotate(360deg);
  }
}

/* ===== STAT ROW ENHANCEMENTS ===== */
.hud-card .stat-row {
  position: relative;
  overflow: hidden;
  background: linear-gradient(90deg, oklch(var(--p, 0.6 0.2 260) / 9%), transparent 25%, transparent 75%, oklch(var(--s, 0.6 0.2 300) / 7%));
  background-size: 200% 100%;
  animation: hud-row-glow 14s ease-in-out infinite;
  transition: all 0.2s ease;
}

@keyframes hud-row-glow {
  0% {
    background-position: 0 0;
  }
  50% {
    background-position: 100% 0;
  }
  100% {
    background-position: 0 0;
  }
}

.hud-card .stat-row::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 2px;
  background: linear-gradient(
    180deg,
    transparent,
    oklch(var(--p, 0.6 0.2 260) / 40%),
    transparent
  );
  opacity: 0;
  transition: opacity 0.2s ease;
}

.hud-card .stat-row:hover::before {
  opacity: 1;
}

.hud-card .stat-row::after {
  content: '';
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
  width: 2px;
  background: linear-gradient(
    180deg,
    transparent,
    oklch(var(--p, 0.6 0.2 260) / 30%),
    transparent
  );
  opacity: 0;
  transition: opacity 0.2s ease;
}

.hud-card .stat-row:hover::after {
  opacity: 1;
}

/* ===== ICON ENHANCEMENTS ===== */
.stat-icon {
  filter: drop-shadow(0 0 3px currentColor);
  transition: filter 0.3s ease;
}

.hud-card .stat-row:hover .stat-icon {
  filter: drop-shadow(0 0 6px currentColor);
}

/* ===== HOVER EFFECTS ON HUD CONTAINERS ===== */
.hud-card:hover {
  border-color: oklch(var(--p, 0.6 0.2 260) / 20%);
  transition: border-color 0.3s ease;
}

.merged-run-hud:hover {
  border-color: oklch(var(--p, 0.6 0.2 260) / 35%);
  transition: border-color 0.3s ease;
}

.performance-hud:hover {
  border-color: oklch(var(--su, 0.7 0.2 160) / 45%);
  transition: border-color 0.3s ease;
}

/* ===== RESOURCE ICON GLOW ===== */
.resource-row:hover .resource-icon {
  text-shadow: 0 0 8px currentColor;
}

/* ===== PERFORMANCE MODE: DISABLE DECORATIONS ===== */
body.performance-mode .hud-card::before,
body.performance-mode .hud-card::after,
body.performance-mode .merged-run-hud::before,
body.performance-mode .merged-run-hud::after,
body.performance-mode .performance-hud::before,
body.performance-mode .performance-hud::after,
body.performance-mode .stat-block::before,
body.performance-mode .stat-block::after {
  opacity: 0;
}

body.performance-mode .live-value-number {
  animation: none;
}

body.performance-mode .live-values-header::before,
body.performance-mode .performance-header::before,
body.performance-mode .stat-block:not(.collapsible) h2::before {
  animation: none;
}

body.performance-mode .hud-card .stat-row::before,
body.performance-mode .hud-card .stat-row::after {
  display: none;
}

body.performance-mode .hud-card .stat-row {
  animation: none;
  background-position: 0 0;
}

body.performance-mode .hud-card,
body.performance-mode .merged-run-hud,
body.performance-mode .performance-hud,
body.performance-mode .stat-block {
  box-shadow: 0 4px 12px oklch(0 0 0 / 25%);
}

body.performance-mode .hud-card:hover,
body.performance-mode .merged-run-hud:hover,
body.performance-mode .performance-hud:hover,
body.performance-mode .stat-block:hover {
  border-color: inherit;
}
